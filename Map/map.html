<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>카카오 지도</title>
    <script
      type="text/javascript"
      src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f04d04995bb42808ea11adf0d41f6abe"
    ></script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden; /* 스크롤바 숨기기 */
      }
      #map {
        width: 100%;
        height: 100%; /* 화면 전체 높이 */
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var mapContainer = document.getElementById("map"),
        mapOption = {
          center: new kakao.maps.LatLng(37.5665, 126.978),
          level: 3,
        };
      var map = new kakao.maps.Map(mapContainer, mapOption);

      // 도서관 마크 추가
      var positions = []; // C#에서 전달받은 데이터로 초기화됩니다.

      positions.forEach(function (pos) {
        var marker = new kakao.maps.Marker({
          position: new kakao.maps.LatLng(pos.Latitude, pos.Longitude),
          title: pos.Name,
        });
        marker.setMap(map);

        kakao.maps.event.addListener(marker, "click", function () {
          var confirmation = confirm(
            pos.Name + "에서 대여를 진행하시겠습니까?"
          );
          if (confirmation) {
            // C# 메서드 호출
            window.external.BorrowBooks(pos.LibraryId); // 도서관 ID를 C# 메서드에 전달
          }
        });
      });
    </script>
  </body>
</html>
